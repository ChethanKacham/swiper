import{e as M,r as d,h as H,j as o,S as U,N as z,P as G,b as J,d as K}from"./index.js";function Q(v){let{swiper:e,extendParams:x,on:r,emit:l,params:p}=v;e.autoplay={running:!1,paused:!1,timeLeft:0},x({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let f,g,a=p&&p.autoplay?p.autoplay.delay:3e3,n=p&&p.autoplay?p.autoplay.delay:3e3,s,y=new Date().getTime(),I,b,w,j,P,c,D;function _(t){!e||e.destroyed||!e.wrapperEl||t.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",_),!(D||t.detail&&t.detail.bySwiperTouchMove)&&m())}const k=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?I=!0:I&&(n=s,I=!1);const t=e.autoplay.paused?s:y+n-new Date().getTime();e.autoplay.timeLeft=t,l("autoplayTimeLeft",t,t/a),g=requestAnimationFrame(()=>{k()})},R=()=>{let t;return e.virtual&&e.params.virtual.enabled?t=e.slides.filter(i=>i.classList.contains("swiper-slide-active"))[0]:t=e.slides[e.activeIndex],t?parseInt(t.getAttribute("data-swiper-autoplay"),10):void 0},L=t=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(g),k();let u=typeof t>"u"?e.params.autoplay.delay:t;a=e.params.autoplay.delay,n=e.params.autoplay.delay;const i=R();!Number.isNaN(i)&&i>0&&typeof t>"u"&&(u=i,a=i,n=i),s=u;const E=e.params.speed,F=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(E,!0,!0),l("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,E,!0,!0),l("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(E,!0,!0),l("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,E,!0,!0),l("autoplay")),e.params.cssMode&&(y=new Date().getTime(),requestAnimationFrame(()=>{L()})))};return u>0?(clearTimeout(f),f=setTimeout(()=>{F()},u)):requestAnimationFrame(()=>{F()}),u},O=()=>{y=new Date().getTime(),e.autoplay.running=!0,L(),l("autoplayStart")},S=()=>{e.autoplay.running=!1,clearTimeout(f),cancelAnimationFrame(g),l("autoplayStop")},h=(t,u)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(f),t||(c=!0);const i=()=>{l("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",_):m()};if(e.autoplay.paused=!0,u){P&&(s=e.params.autoplay.delay),P=!1,i();return}s=(s||e.params.autoplay.delay)-(new Date().getTime()-y),!(e.isEnd&&s<0&&!e.params.loop)&&(s<0&&(s=0),i())},m=()=>{e.isEnd&&s<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(y=new Date().getTime(),c?(c=!1,L(s)):L(),e.autoplay.paused=!1,l("autoplayResume"))},N=()=>{if(e.destroyed||!e.autoplay.running)return;const t=M();t.visibilityState==="hidden"&&(c=!0,h(!0)),t.visibilityState==="visible"&&m()},C=t=>{t.pointerType==="mouse"&&(c=!0,D=!0,!(e.animating||e.autoplay.paused)&&h(!0))},A=t=>{t.pointerType==="mouse"&&(D=!1,e.autoplay.paused&&m())},V=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",C),e.el.addEventListener("pointerleave",A))},B=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",C),e.el.removeEventListener("pointerleave",A))},$=()=>{M().addEventListener("visibilitychange",N)},q=()=>{M().removeEventListener("visibilitychange",N)};r("init",()=>{e.params.autoplay.enabled&&(V(),$(),O())}),r("destroy",()=>{B(),q(),e.autoplay.running&&S()}),r("_freeModeStaticRelease",()=>{(w||c)&&m()}),r("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?S():h(!0,!0)}),r("beforeTransitionStart",(t,u,i)=>{e.destroyed||!e.autoplay.running||(i||!e.params.autoplay.disableOnInteraction?h(!0,!0):S())}),r("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){S();return}b=!0,w=!1,c=!1,j=setTimeout(()=>{c=!0,w=!0,h(!0)},200)}}),r("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!b)){if(clearTimeout(j),clearTimeout(f),e.params.autoplay.disableOnInteraction){w=!1,b=!1;return}w&&e.params.cssMode&&m(),w=!1,b=!1}}),r("slideChange",()=>{e.destroyed||!e.autoplay.running||(P=!0)}),Object.assign(e.autoplay,{start:O,stop:S,pause:h,resume:m})}const W="_swiperLoop_hsfuv_5",X="_dark_hsfuv_21",Y="_swiperSlide_hsfuv_29",T={swiperLoop:W,dark:X,swiperSlide:Y};function Z({images:v}){const[e,x]=d.useState(1),r=d.useRef(null),[l,p]=d.useState(!1);d.useEffect(()=>{const a=()=>{p(window.parent.document.body.classList.contains("dark"))};a();const n=new MutationObserver(a);return n.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),d.useEffect(()=>{(()=>{const n=new URLSearchParams(window.location.hash.substring(1)),s=n.get("feed"),y=parseInt(n.get("scene"),10);console.log(`Initial hash params - feed: ${s}, scene: ${y}`),window.history.replaceState(null,null,"#feed=nasa&scene=1")})()},[]),d.useEffect(()=>{const a=()=>{const n=new URLSearchParams(window.location.hash.substring(1)),s=parseInt(n.get("scene"),10);!isNaN(s)&&s>0&&s<12&&r.current?r.current.swiper.slideToLoop(s-1):r.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",a),()=>{window.removeEventListener("hashchange",a)}},[]);const f=a=>{const n=a.realIndex+1;x(n),window.history.replaceState(null,null,`#feed=nasa&scene=${n}`)},g=a=>{const n=a.realIndex+1;window.parent.postMessage({activeIndex:n,source:"loop"},"*")};return d.useEffect(()=>{console.log(`activeIndex updated: ${e}`)},[e]),d.useEffect(()=>{H()},[v]),o.jsx("div",{className:`${T.swiperLoopContainer}  ${l?T.dark:""}`,children:o.jsx(U,{grabCursor:!0,loop:v.length>3,initialSlide:0,centeredSlides:!1,slidesPerView:8,slidesPerGroup:1,autoplay:{delay:1e4,disableOnInteraction:!1},spaceBetween:10,breakpoints:{1200:{slidesPerView:8},1024:{slidesPerView:7},800:{slidesPerView:6},650:{slidesPerView:5},550:{slidesPerView:4},425:{slidesPerView:3},320:{slidesPerView:2}},modules:[Q,z,G],navigation:!0,pagination:{clickable:!0},onSlideChange:f,className:T.swiperLoop,ref:r,children:v.map((a,n)=>o.jsx(J,{className:T.swiperSlide,children:o.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>g(r.current.swiper),children:[a.media_type==="video"?o.jsx("iframe",{src:a.url,title:a.title,allowFullScreen:!0}):o.jsx("img",{src:a.url,alt:a.title||"Slide Image"}),o.jsx("p",{children:a.title})]})},n))})})}function ee(){return o.jsx(o.Fragment,{children:o.jsx(Z,{})})}K(document.getElementById("root")).render(o.jsx(d.StrictMode,{children:o.jsx(ee,{})}));
