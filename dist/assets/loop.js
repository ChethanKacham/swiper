import{e as _,r as u,h as q,j as o,S as z,N as U,P as G,b as K,d as Y}from"./index.js";function J(g){let{swiper:e,extendParams:T,on:l,emit:r,params:c}=g;e.autoplay={running:!1,paused:!1,timeLeft:0},T({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let y,v,n=c&&c.autoplay?c.autoplay.delay:3e3,s=c&&c.autoplay?c.autoplay.delay:3e3,a,d=new Date().getTime(),S,b,w,M,x,f,D;function j(t){!e||e.destroyed||!e.wrapperEl||t.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",j),!(D||t.detail&&t.detail.bySwiperTouchMove)&&m())}const k=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?S=!0:S&&(s=a,S=!1);const t=e.autoplay.paused?a:d+s-new Date().getTime();e.autoplay.timeLeft=t,r("autoplayTimeLeft",t,t/n),v=requestAnimationFrame(()=>{k()})},R=()=>{let t;return e.virtual&&e.params.virtual.enabled?t=e.slides.filter(i=>i.classList.contains("swiper-slide-active"))[0]:t=e.slides[e.activeIndex],t?parseInt(t.getAttribute("data-swiper-autoplay"),10):void 0},I=t=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(v),k();let p=typeof t>"u"?e.params.autoplay.delay:t;n=e.params.autoplay.delay,s=e.params.autoplay.delay;const i=R();!Number.isNaN(i)&&i>0&&typeof t>"u"&&(p=i,n=i,s=i),a=p;const L=e.params.speed,A=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(L,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,L,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(L,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,L,!0,!0),r("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{I()})))};return p>0?(clearTimeout(y),y=setTimeout(()=>{A()},p)):requestAnimationFrame(()=>{A()}),p},O=()=>{d=new Date().getTime(),e.autoplay.running=!0,I(),r("autoplayStart")},E=()=>{e.autoplay.running=!1,clearTimeout(y),cancelAnimationFrame(v),r("autoplayStop")},h=(t,p)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(y),t||(f=!0);const i=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",j):m()};if(e.autoplay.paused=!0,p){x&&(a=e.params.autoplay.delay),x=!1,i();return}a=(a||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&a<0&&!e.params.loop)&&(a<0&&(a=0),i())},m=()=>{e.isEnd&&a<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),f?(f=!1,I(a)):I(),e.autoplay.paused=!1,r("autoplayResume"))},C=()=>{if(e.destroyed||!e.autoplay.running)return;const t=_();t.visibilityState==="hidden"&&(f=!0,h(!0)),t.visibilityState==="visible"&&m()},N=t=>{t.pointerType==="mouse"&&(f=!0,D=!0,!(e.animating||e.autoplay.paused)&&h(!0))},F=t=>{t.pointerType==="mouse"&&(D=!1,e.autoplay.paused&&m())},V=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",N),e.el.addEventListener("pointerleave",F))},$=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",N),e.el.removeEventListener("pointerleave",F))},B=()=>{_().addEventListener("visibilitychange",C)},H=()=>{_().removeEventListener("visibilitychange",C)};l("init",()=>{e.params.autoplay.enabled&&(V(),B(),O())}),l("destroy",()=>{$(),H(),e.autoplay.running&&E()}),l("_freeModeStaticRelease",()=>{(w||f)&&m()}),l("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?E():h(!0,!0)}),l("beforeTransitionStart",(t,p,i)=>{e.destroyed||!e.autoplay.running||(i||!e.params.autoplay.disableOnInteraction?h(!0,!0):E())}),l("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){E();return}b=!0,w=!1,f=!1,M=setTimeout(()=>{f=!0,w=!0,h(!0)},200)}}),l("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!b)){if(clearTimeout(M),clearTimeout(y),e.params.autoplay.disableOnInteraction){w=!1,b=!1;return}w&&e.params.cssMode&&m(),w=!1,b=!1}}),l("slideChange",()=>{e.destroyed||!e.autoplay.running||(x=!0)}),Object.assign(e.autoplay,{start:O,stop:E,pause:h,resume:m})}const Q="_swiperLoop_1oiie_5",W="_dark_1oiie_21",X="_swiperLoopContainer_1oiie_21",Z="_swiperSlide_1oiie_29",P={swiperLoop:Q,dark:W,swiperLoopContainer:X,swiperSlide:Z};function ee(){const[g,e]=u.useState([]),[T,l]=u.useState(1),r=u.useRef(null),[c,y]=u.useState(!1);u.useEffect(()=>{const n=()=>{y(window.parent.document.body.classList.contains("dark"))};n();const s=new MutationObserver(n);return s.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>s.disconnect()},[]),u.useEffect(()=>{(()=>{const a=new URLSearchParams(window.location.hash.substring(1)),d=a.get("feed"),S=parseInt(a.get("scene"),10);console.log(`Initial hash params - feed: ${d}, scene: ${S}`),window.history.replaceState(null,null,"#feed=nasa&scene=1")})(),(async()=>{try{const a=await fetch("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&hd=True&count=11");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const d=await a.json();e(d)}catch(a){console.error("Failed to fetch images: "+a)}})()},[]),u.useEffect(()=>{const n=()=>{const s=new URLSearchParams(window.location.hash.substring(1)),a=parseInt(s.get("scene"),10);!isNaN(a)&&a>0&&a<12&&r.current?r.current.swiper.slideToLoop(a-1):r.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",n),()=>{window.removeEventListener("hashchange",n)}},[]);const v=n=>{const s=n.realIndex+1;l(s),window.history.replaceState(null,null,`#feed=nasa&scene=${s}`)};return u.useEffect(()=>{console.log(`activeIndex updated: ${T}`)},[T]),u.useEffect(()=>{q()},[g]),o.jsx("div",{className:`${P.swiperLoopContainer} ${c?P.dark:""}`,children:o.jsx(z,{grabCursor:!0,loop:g.length>3,initialSlide:0,centeredSlides:!1,slidesPerView:8,slidesPerGroup:1,autoplay:{delay:1e4,disableOnInteraction:!1},spaceBetween:10,breakpoints:{1200:{slidesPerView:8},1024:{slidesPerView:7},800:{slidesPerView:6},650:{slidesPerView:5},550:{slidesPerView:4},425:{slidesPerView:3},320:{slidesPerView:2}},modules:[J,U,G],navigation:!0,pagination:{clickable:!0},onSlideChange:v,className:P.swiperLoop,ref:r,children:g.map((n,s)=>o.jsx(K,{className:P.swiperSlide,children:o.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",children:[n.media_type==="video"?o.jsx("iframe",{src:n.url,title:n.title,allowFullScreen:!0}):o.jsx("img",{src:n.url,alt:n.title||"Slide Image"}),o.jsx("p",{children:n.title})]})},s))})})}function te(){return o.jsx(o.Fragment,{children:o.jsx(ee,{})})}Y(document.getElementById("root")).render(o.jsx(u.StrictMode,{children:o.jsx(te,{})}));
