import{e as x,r as u,h as H,j as o,S as z,N as G,P as U,b as Q,d as J}from"./index.js";function K(g){let{swiper:e,extendParams:T,on:l,emit:r,params:c}=g;e.autoplay={running:!1,paused:!1,timeLeft:0},T({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let y,v,s=c&&c.autoplay?c.autoplay.delay:3e3,n=c&&c.autoplay?c.autoplay.delay:3e3,a,d=new Date().getTime(),S,L,w,_,P,f,D;function M(t){!e||e.destroyed||!e.wrapperEl||t.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",M),!(D||t.detail&&t.detail.bySwiperTouchMove)&&m())}const k=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?S=!0:S&&(n=a,S=!1);const t=e.autoplay.paused?a:d+n-new Date().getTime();e.autoplay.timeLeft=t,r("autoplayTimeLeft",t,t/s),v=requestAnimationFrame(()=>{k()})},V=()=>{let t;return e.virtual&&e.params.virtual.enabled?t=e.slides.filter(i=>i.classList.contains("swiper-slide-active"))[0]:t=e.slides[e.activeIndex],t?parseInt(t.getAttribute("data-swiper-autoplay"),10):void 0},I=t=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(v),k();let p=typeof t>"u"?e.params.autoplay.delay:t;s=e.params.autoplay.delay,n=e.params.autoplay.delay;const i=V();!Number.isNaN(i)&&i>0&&typeof t>"u"&&(p=i,s=i,n=i),a=p;const b=e.params.speed,R=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(b,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,b,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(b,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,b,!0,!0),r("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{I()})))};return p>0?(clearTimeout(y),y=setTimeout(()=>{R()},p)):requestAnimationFrame(()=>{R()}),p},N=()=>{d=new Date().getTime(),e.autoplay.running=!0,I(),r("autoplayStart")},E=()=>{e.autoplay.running=!1,clearTimeout(y),cancelAnimationFrame(v),r("autoplayStop")},h=(t,p)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(y),t||(f=!0);const i=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",M):m()};if(e.autoplay.paused=!0,p){P&&(a=e.params.autoplay.delay),P=!1,i();return}a=(a||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&a<0&&!e.params.loop)&&(a<0&&(a=0),i())},m=()=>{e.isEnd&&a<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),f?(f=!1,I(a)):I(),e.autoplay.paused=!1,r("autoplayResume"))},O=()=>{if(e.destroyed||!e.autoplay.running)return;const t=x();t.visibilityState==="hidden"&&(f=!0,h(!0)),t.visibilityState==="visible"&&m()},F=t=>{t.pointerType==="mouse"&&(f=!0,D=!0,!(e.animating||e.autoplay.paused)&&h(!0))},A=t=>{t.pointerType==="mouse"&&(D=!1,e.autoplay.paused&&m())},C=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",F),e.el.addEventListener("pointerleave",A))},q=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",F),e.el.removeEventListener("pointerleave",A))},B=()=>{x().addEventListener("visibilitychange",O)},$=()=>{x().removeEventListener("visibilitychange",O)};l("init",()=>{e.params.autoplay.enabled&&(C(),B(),N())}),l("destroy",()=>{q(),$(),e.autoplay.running&&E()}),l("_freeModeStaticRelease",()=>{(w||f)&&m()}),l("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?E():h(!0,!0)}),l("beforeTransitionStart",(t,p,i)=>{e.destroyed||!e.autoplay.running||(i||!e.params.autoplay.disableOnInteraction?h(!0,!0):E())}),l("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){E();return}L=!0,w=!1,f=!1,_=setTimeout(()=>{f=!0,w=!0,h(!0)},200)}}),l("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!L)){if(clearTimeout(_),clearTimeout(y),e.params.autoplay.disableOnInteraction){w=!1,L=!1;return}w&&e.params.cssMode&&m(),w=!1,L=!1}}),l("slideChange",()=>{e.destroyed||!e.autoplay.running||(P=!0)}),Object.assign(e.autoplay,{start:N,stop:E,pause:h,resume:m})}const W="_swiperLoop_1q68j_5",X="_dark_1q68j_21",Y="_swiperSlide_1q68j_29",Z="_mySwiper_1q68j_159",j={swiperLoop:W,dark:X,swiperSlide:Y,mySwiper:Z};function ee(){const[g,e]=u.useState([]),[T,l]=u.useState(1),r=u.useRef(null),[c,y]=u.useState(!1);u.useEffect(()=>{const s=()=>{y(window.parent.document.body.classList.contains("dark"))};s();const n=new MutationObserver(s);return n.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),u.useEffect(()=>{(()=>{const a=new URLSearchParams(window.location.hash.substring(1)),d=a.get("feed"),S=parseInt(a.get("scene"),10);console.log(`Initial hash params - feed: ${d}, scene: ${S}`),window.history.replaceState(null,null,"#feed=nasa&scene=1")})(),(async()=>{try{const a=await fetch("https://api.nasa.gov/planetary/apod?api_key=7BdaDaLN7EHQyb8Db3NDkE1dPSniiIG2oE0wvt64&hd=True&count=11");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const d=await a.json();e(d)}catch(a){console.error("Failed to fetch images: "+a)}})()},[]),u.useEffect(()=>{const s=()=>{const n=new URLSearchParams(window.location.hash.substring(1)),a=parseInt(n.get("scene"),10);!isNaN(a)&&a>0&&a<12&&r.current?r.current.swiper.slideToLoop(a-1):r.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",s),()=>{window.removeEventListener("hashchange",s)}},[]);const v=s=>{const n=s.realIndex+1;l(n),window.history.replaceState(null,null,`#feed=nasa&scene=${n}`)};return u.useEffect(()=>{console.log(`activeIndex updated: ${T}`)},[T]),u.useEffect(()=>{H()},[g]),o.jsx("div",{className:`${c?j.dark:""}`,children:o.jsx(z,{grabCursor:!0,loop:g.length>3,initialSlide:0,centeredSlides:!1,slidesPerView:8,slidesPerGroup:1,autoplay:{delay:1e4,disableOnInteraction:!1},spaceBetween:10,breakpoints:{1200:{slidesPerView:8},1024:{slidesPerView:7},800:{slidesPerView:6},650:{slidesPerView:5},550:{slidesPerView:4},425:{slidesPerView:3},320:{slidesPerView:2}},modules:[K,G,U],navigation:!0,pagination:{clickable:!0},onSlideChange:v,className:j.swiperLoop,ref:r,children:g.map((s,n)=>o.jsx(Q,{className:j.swiperSlide,children:o.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:[s.media_type==="video"?o.jsx("iframe",{src:s.url,title:s.title,allowFullScreen:!0}):o.jsx("img",{src:s.url,alt:s.title||"Slide Image"}),o.jsx("p",{children:s.title})]})},n))})})}function te(){return o.jsx(o.Fragment,{children:o.jsx(ee,{})})}J(document.getElementById("root")).render(o.jsx(u.StrictMode,{children:o.jsx(te,{})}));
