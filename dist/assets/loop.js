import{e as D,r as y,h as $,j as o,S as z,N as G,P as U,b as Q,d as J}from"./index.js";function K(g){let{swiper:e,extendParams:T,on:u,emit:s,params:p}=g;e.autoplay={running:!1,paused:!1,timeLeft:0},T({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,l,n=p&&p.autoplay?p.autoplay.delay:3e3,c=p&&p.autoplay?p.autoplay.delay:3e3,r,v=new Date().getTime(),I,L,h,j,P,f,x;function N(t){!e||e.destroyed||!e.wrapperEl||t.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",N),!(x||t.detail&&t.detail.bySwiperTouchMove)&&m())}const M=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?I=!0:I&&(c=r,I=!1);const t=e.autoplay.paused?r:v+c-new Date().getTime();e.autoplay.timeLeft=t,s("autoplayTimeLeft",t,t/n),l=requestAnimationFrame(()=>{M()})},k=()=>{let t;return e.virtual&&e.params.virtual.enabled?t=e.slides.filter(i=>i.classList.contains("swiper-slide-active"))[0]:t=e.slides[e.activeIndex],t?parseInt(t.getAttribute("data-swiper-autoplay"),10):void 0},b=t=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(l),M();let d=typeof t>"u"?e.params.autoplay.delay:t;n=e.params.autoplay.delay,c=e.params.autoplay.delay;const i=k();!Number.isNaN(i)&&i>0&&typeof t>"u"&&(d=i,n=i,c=i),r=d;const E=e.params.speed,R=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(E,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,E,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(E,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,E,!0,!0),s("autoplay")),e.params.cssMode&&(v=new Date().getTime(),requestAnimationFrame(()=>{b()})))};return d>0?(clearTimeout(a),a=setTimeout(()=>{R()},d)):requestAnimationFrame(()=>{R()}),d},O=()=>{v=new Date().getTime(),e.autoplay.running=!0,b(),s("autoplayStart")},S=()=>{e.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(l),s("autoplayStop")},w=(t,d)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(a),t||(f=!0);const i=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",N):m()};if(e.autoplay.paused=!0,d){P&&(r=e.params.autoplay.delay),P=!1,i();return}r=(r||e.params.autoplay.delay)-(new Date().getTime()-v),!(e.isEnd&&r<0&&!e.params.loop)&&(r<0&&(r=0),i())},m=()=>{e.isEnd&&r<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(v=new Date().getTime(),f?(f=!1,b(r)):b(),e.autoplay.paused=!1,s("autoplayResume"))},_=()=>{if(e.destroyed||!e.autoplay.running)return;const t=D();t.visibilityState==="hidden"&&(f=!0,w(!0)),t.visibilityState==="visible"&&m()},A=t=>{t.pointerType==="mouse"&&(f=!0,x=!0,!(e.animating||e.autoplay.paused)&&w(!0))},F=t=>{t.pointerType==="mouse"&&(x=!1,e.autoplay.paused&&m())},C=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",A),e.el.addEventListener("pointerleave",F))},B=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",A),e.el.removeEventListener("pointerleave",F))},q=()=>{D().addEventListener("visibilitychange",_)},H=()=>{D().removeEventListener("visibilitychange",_)};u("init",()=>{e.params.autoplay.enabled&&(C(),q(),O())}),u("destroy",()=>{B(),H(),e.autoplay.running&&S()}),u("_freeModeStaticRelease",()=>{(h||f)&&m()}),u("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?S():w(!0,!0)}),u("beforeTransitionStart",(t,d,i)=>{e.destroyed||!e.autoplay.running||(i||!e.params.autoplay.disableOnInteraction?w(!0,!0):S())}),u("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){S();return}L=!0,h=!1,f=!1,j=setTimeout(()=>{f=!0,h=!0,w(!0)},200)}}),u("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!L)){if(clearTimeout(j),clearTimeout(a),e.params.autoplay.disableOnInteraction){h=!1,L=!1;return}h&&e.params.cssMode&&m(),h=!1,L=!1}}),u("slideChange",()=>{e.destroyed||!e.autoplay.running||(P=!0)}),Object.assign(e.autoplay,{start:O,stop:S,pause:w,resume:m})}const W="_swiperLoop_gqkn9_5",X="_swiperSlide_gqkn9_21",V={swiperLoop:W,swiperSlide:X};function Y(){const[g,e]=y.useState([]),[T,u]=y.useState(1),s=y.useRef(null);y.useEffect(()=>{(()=>{const n=new URLSearchParams(window.location.hash.substring(1)),c=n.get("feed"),r=parseInt(n.get("scene"),10);console.log(`Initial hash params - feed: ${c}, scene: ${r}`),window.history.replaceState(null,null,"#feed=nasa&scene=1")})(),(async()=>{try{const n=await fetch("https://api.nasa.gov/planetary/apod?api_key=7BdaDaLN7EHQyb8Db3NDkE1dPSniiIG2oE0wvt64&hd=True&count=11");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const c=await n.json();e(c)}catch(n){console.error("Failed to fetch images: "+n)}})()},[]),y.useEffect(()=>{const a=()=>{const l=new URLSearchParams(window.location.hash.substring(1)),n=parseInt(l.get("scene"),10);!isNaN(n)&&n>0&&n<12&&s.current?s.current.swiper.slideToLoop(n-1):s.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",a),()=>{window.removeEventListener("hashchange",a)}},[]);const p=a=>{const l=a.realIndex+1;u(l),window.history.replaceState(null,null,`#feed=nasa&scene=${l}`)};return y.useEffect(()=>{console.log(`activeIndex updated: ${T}`)},[T]),y.useEffect(()=>{$()},[g]),o.jsx("div",{children:o.jsx(z,{grabCursor:!0,loop:g.length>3,initialSlide:0,centeredSlides:!1,slidesPerView:8,slidesPerGroup:1,autoplay:{delay:1e4,disableOnInteraction:!1},spaceBetween:10,breakpoints:{1200:{slidesPerView:8},1024:{slidesPerView:7},800:{slidesPerView:6},650:{slidesPerView:5},550:{slidesPerView:4},425:{slidesPerView:3},320:{slidesPerView:2}},modules:[K,G,U],navigation:!0,pagination:{clickable:!0},onSlideChange:p,className:V.swiperLoop,ref:s,children:g.map((a,l)=>o.jsx(Q,{className:V.swiperSlide,children:o.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",children:[a.media_type==="video"?o.jsx("iframe",{src:a.url,title:a.title,allowFullScreen:!0}):o.jsx("img",{src:a.url,alt:a.title||"Slide Image"}),o.jsx("p",{children:a.title})]})},l))})})}function Z(){return o.jsx(o.Fragment,{children:o.jsx(Y,{})})}J(document.getElementById("root")).render(o.jsx(y.StrictMode,{children:o.jsx(Z,{})}));
