import{r as o,h as u,j as r,S as w,N as p,P as f,a as h,b as S,c as x}from"./index.js";import{E as v}from"./effect-coverflow.js";const g="_swiperContainer_urxys_3",j="_mySwiper_urxys_13",E="_dark_urxys_25",k="_swiperSlide_urxys_33",c={swiperContainer:g,mySwiper:j,dark:E,swiperSlide:k};function y({images:l}){const n=o.useRef(null);o.useEffect(()=>{const e=s=>{if(S.includes(s.origin)){const{action:a,scene:t}=s.data;if(a==="changeSlide"&&!isNaN(t)){const i=n.current.swiper;console.log("Scene: "+t),t>0&&t<=18&&n.current?i.slideToLoop(t-1):i.slideToLoop(0)}}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]);const d=e=>{const s=e+1;console.log("Slide clicked, real index:",s),n.current.swiper&&n.current.swiper.slideToLoop(e),window.parent.postMessage({index:s,source:"loop"},"*")};return o.useEffect(()=>{u()},[l]),r.jsx("div",{className:c.swiperContainer,children:r.jsx(w,{effect:"slide",grabCursor:!0,loop:l.length>3,centeredSlides:!0,slidesPerView:"auto",modules:[p,f],spaceBetween:0,navigation:!0,pagination:{clickable:!0},className:c.mySwiper,slidesPerGroup:1,ref:n,children:l.map((e,s)=>r.jsx(h,{className:c.swiperSlide,onClick:()=>d(s),children:r.jsxs("a",{href:"#",onClick:a=>a.preventDefault(),children:[e.media_type==="video"?r.jsx("iframe",{src:e.url,title:e.title,allowFullScreen:!0}):r.jsx("img",{src:e.url,alt:e.title||"Slide Image"}),r.jsx("p",{children:e.title})]})},s))})})}function C({images:l}){const n=o.useRef(null);o.useEffect(()=>{const e=s=>{if(S.includes(s.origin)){const{action:a,scene:t}=s.data;if(a==="changeSlide"&&!isNaN(t)){const i=n.current.swiper;console.log("Scene: "+t),t>0&&t<=18&&n.current?i.slideToLoop(t-1):i.slideToLoop(0)}}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]);const d=e=>{const s=e+1;console.log("Slide clicked, real index:",s),n.current.swiper&&n.current.swiper.slideToLoop(e),window.parent.postMessage({index:s,source:"loop"},"*")};return o.useEffect(()=>{u()},[l]),r.jsx("div",{className:c.swiperContainer,children:r.jsx(w,{effect:"coverflow",grabCursor:!0,loop:l.length>3,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:40,stretch:0,depth:100,modifier:1,slideShadows:!1},modules:[v,p,f],spaceBetween:50,navigation:!0,pagination:{clickable:!0},className:c.mySwiper,slidesPerGroup:1,ref:n,children:l.map((e,s)=>r.jsx(h,{className:c.swiperSlide,onClick:()=>d(s),children:r.jsxs("a",{href:"#",onClick:a=>a.preventDefault(),children:[e.media_type==="video"?r.jsx("iframe",{src:e.url,title:e.title,allowFullScreen:!0}):r.jsx("img",{src:e.url,alt:e.title||"Slide Image"}),r.jsx("p",{children:e.title})]})},s))})})}function _(){const[l,n]=o.useState(window.innerWidth<800),[d,e]=o.useState([]),[s,a]=o.useState(!1);return o.useEffect(()=>{const t=()=>a(window.parent.document.body.classList.contains("dark"));t();const i=new MutationObserver(t);return i.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>i.disconnect()},[]),o.useEffect(()=>{const t=()=>n(window.innerWidth<800);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),o.useEffect(()=>{(async()=>{try{const i=await fetch("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&hd=True&count=18");if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const m=await i.json();e(m)}catch(i){console.error("Failed to fetch images: "+i)}})()},[]),r.jsx("div",{className:`${s?c.dark:""}`,children:l?r.jsx(y,{images:d}):r.jsx(C,{images:d})})}x(document.getElementById("root")).render(r.jsx(o.StrictMode,{children:r.jsx(_,{})}));
