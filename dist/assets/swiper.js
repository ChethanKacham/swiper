import{g as _,c as H,a as F,r as u,j as l,S as U,N as Y,P as B,b as D,d as V}from"./index.js";const X="_swiperContainer_u4ds0_3",G="_mySwiper_u4ds0_15",K="_swiperSlide_u4ds0_27",q={swiperContainer:X,mySwiper:G,swiperSlide:K,"swiper-slide":"_swiper-slide_u4ds0_105"};function W(f){const{effect:r,swiper:e,on:n,setTranslate:c,setTransition:p,overwriteParams:s,perspective:a,recreateShadows:t,getEffectParams:h}=f;n("beforeInit",()=>{if(e.params.effect!==r)return;e.classNames.push(`${e.params.containerModifierClass}${r}`),a&&a()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const o=s?s():{};Object.assign(e.params,o),Object.assign(e.originalParams,o)}),n("setTranslate",()=>{e.params.effect===r&&c()}),n("setTransition",(o,m)=>{e.params.effect===r&&p(m)}),n("transitionEnd",()=>{if(e.params.effect===r&&t){if(!h||!h().slideShadows)return;e.slides.forEach(o=>{o.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(m=>m.remove())}),t()}});let i;n("virtualUpdate",()=>{e.params.effect===r&&(e.slides.length||(i=!0),requestAnimationFrame(()=>{i&&e.slides&&e.slides.length&&(c(),i=!1)}))})}function Z(f,r){const e=_(r);return e!==r&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function N(f,r,e){const n=`swiper-slide-shadow${e?`-${e}`:""}${` swiper-slide-shadow-${f}`}`,c=_(r);let p=c.querySelector(`.${n.split(" ").join(".")}`);return p||(p=H("div",n.split(" ")),c.append(p)),p}function J(f){let{swiper:r,extendParams:e,on:n}=f;e({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),W({effect:"coverflow",swiper:r,on:n,setTranslate:()=>{const{width:s,height:a,slides:t,slidesSizesGrid:h}=r,i=r.params.coverflowEffect,o=r.isHorizontal(),m=r.translate,L=o?-m+s/2:-m+a/2,M=o?i.rotate:-i.rotate,O=i.depth,T=F(r);for(let S=0,R=t.length;S<R;S+=1){const w=t[S],v=h[S],k=w.swiperSlideOffset,C=(L-k-v/2)/v,d=typeof i.modifier=="function"?i.modifier(C):C*i.modifier;let b=o?M*d:0,x=o?0:M*d,$=-O*Math.abs(d),g=i.stretch;typeof g=="string"&&g.indexOf("%")!==-1&&(g=parseFloat(i.stretch)/100*v);let I=o?0:g*d,j=o?g*d:0,P=1-(1-i.scale)*Math.abs(d);Math.abs(j)<.001&&(j=0),Math.abs(I)<.001&&(I=0),Math.abs($)<.001&&($=0),Math.abs(b)<.001&&(b=0),Math.abs(x)<.001&&(x=0),Math.abs(P)<.001&&(P=0);const z=`translate3d(${j}px,${I}px,${$}px)  rotateX(${T(x)}deg) rotateY(${T(b)}deg) scale(${P})`,A=Z(i,w);if(A.style.transform=z,w.style.zIndex=-Math.abs(Math.round(d))+1,i.slideShadows){let y=o?w.querySelector(".swiper-slide-shadow-left"):w.querySelector(".swiper-slide-shadow-top"),E=o?w.querySelector(".swiper-slide-shadow-right"):w.querySelector(".swiper-slide-shadow-bottom");y||(y=N("coverflow",w,o?"left":"top")),E||(E=N("coverflow",w,o?"right":"bottom")),y&&(y.style.opacity=d>0?d:0),E&&(E.style.opacity=-d>0?-d:0)}}},setTransition:s=>{r.slides.map(t=>_(t)).forEach(t=>{t.style.transitionDuration=`${s}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${s}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function Q(){const[f,r]=u.useState([]),[e,n]=u.useState(0),c=u.useRef(null);u.useEffect(()=>{(()=>{const t=new URLSearchParams(window.location.hash.substring(1)),h=t.get("feed"),i=parseInt(t.get("scene"),10);console.log(`Initial hash params - feed: ${h}, scene: ${i}`),window.history.replaceState(null,null,"#feed=nasa&scene=1"),n(1)})(),(async()=>{try{const t=await fetch("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&hd=True&count=9");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const h=await t.json();r(h)}catch(t){console.error("Failed to fetch images: "+t)}})()},[]),u.useEffect(()=>{const s=()=>{const a=new URLSearchParams(window.location.hash.substring(1)),t=parseInt(a.get("scene"),10);!isNaN(t)&&t>0&&t<10&&c.current?c.current.swiper.slideToLoop(t-1):c.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",s),()=>{window.removeEventListener("hashchange",s)}},[]);const p=s=>{const a=s.realIndex+1;n(a),window.history.replaceState(null,null,`#feed=nasa&scene=${a}`)};return u.useEffect(()=>{console.log(`activeIndex updated: ${e}`)},[e]),u.useEffect(()=>{(()=>{document.querySelectorAll(".swiper-slide iframe").forEach(a=>{a.addEventListener("mouseenter",()=>{a.style.pointerEvents="auto"}),a.addEventListener("mouseleave",()=>{a.style.pointerEvents="none"})})})()},[f]),l.jsx("div",{className:"styles.swiperContainer",children:l.jsx(U,{effect:"coverflow",grabCursor:!0,loop:f.length>3,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:40,stretch:0,depth:100,modifier:1,slideShadows:!1},modules:[J,Y,B],spaceBetween:50,navigation:!0,pagination:{clickable:!0},onSlideChange:p,className:q.mySwiper,slidesPerGroup:1,ref:c,children:f.map((s,a)=>l.jsx(D,{className:q.swiperSlide,children:l.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:[s.media_type==="video"?l.jsx("iframe",{src:s.url,title:s.title,allowFullScreen:!0}):l.jsx("img",{src:s.url,alt:s.title||"Slide Image"}),l.jsx("p",{children:s.title})]})},a))})})}function ee(){return l.jsx(l.Fragment,{children:l.jsx(Q,{})})}V(document.getElementById("root")).render(l.jsx(u.StrictMode,{children:l.jsx(ee,{})}));
