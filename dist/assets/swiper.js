import{g as P,c as F,a as H,r as f,j as n,S as D,N as U,P as Y,b as B,d as V}from"./index.js";const X="_swiperContainer_kxs28_3",G="_mySwiper_kxs28_13",K="_dark_kxs28_25",W="_swiperSlide_kxs28_33",v={swiperContainer:X,mySwiper:G,dark:K,swiperSlide:W};function Z(d){const{effect:a,swiper:t,on:o,setTranslate:l,setTransition:h,overwriteParams:p,perspective:m,recreateShadows:s,getEffectParams:r}=d;o("beforeInit",()=>{if(t.params.effect!==a)return;t.classNames.push(`${t.params.containerModifierClass}${a}`),m&&m()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const i=p?p():{};Object.assign(t.params,i),Object.assign(t.originalParams,i)}),o("setTranslate",()=>{t.params.effect===a&&l()}),o("setTransition",(i,u)=>{t.params.effect===a&&h(u)}),o("transitionEnd",()=>{if(t.params.effect===a&&s){if(!r||!r().slideShadows)return;t.slides.forEach(i=>{i.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(u=>u.remove())}),s()}});let e;o("virtualUpdate",()=>{t.params.effect===a&&(t.slides.length||(e=!0),requestAnimationFrame(()=>{e&&t.slides&&t.slides.length&&(l(),e=!1)}))})}function J(d,a){const t=P(a);return t!==a&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function q(d,a,t){const o=`swiper-slide-shadow${t?`-${t}`:""}${` swiper-slide-shadow-${d}`}`,l=P(a);let h=l.querySelector(`.${o.split(" ").join(".")}`);return h||(h=F("div",o.split(" ")),l.append(h)),h}function Q(d){let{swiper:a,extendParams:t,on:o}=d;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Z({effect:"coverflow",swiper:a,on:o,setTranslate:()=>{const{width:p,height:m,slides:s,slidesSizesGrid:r}=a,e=a.params.coverflowEffect,i=a.isHorizontal(),u=a.translate,L=i?-u+p/2:-u+m/2,_=i?e.rotate:-e.rotate,N=e.depth,T=H(a);for(let S=0,O=s.length;S<O;S+=1){const w=s[S],b=r[S],R=w.swiperSlideOffset,C=(L-R-b/2)/b,c=typeof e.modifier=="function"?e.modifier(C):C*e.modifier;let x=i?_*c:0,$=i?0:_*c,k=-N*Math.abs(c),g=e.stretch;typeof g=="string"&&g.indexOf("%")!==-1&&(g=parseFloat(e.stretch)/100*b);let I=i?0:g*c,M=i?g*c:0,j=1-(1-e.scale)*Math.abs(c);Math.abs(M)<.001&&(M=0),Math.abs(I)<.001&&(I=0),Math.abs(k)<.001&&(k=0),Math.abs(x)<.001&&(x=0),Math.abs($)<.001&&($=0),Math.abs(j)<.001&&(j=0);const z=`translate3d(${M}px,${I}px,${k}px)  rotateX(${T($)}deg) rotateY(${T(x)}deg) scale(${j})`,A=J(e,w);if(A.style.transform=z,w.style.zIndex=-Math.abs(Math.round(c))+1,e.slideShadows){let y=i?w.querySelector(".swiper-slide-shadow-left"):w.querySelector(".swiper-slide-shadow-top"),E=i?w.querySelector(".swiper-slide-shadow-right"):w.querySelector(".swiper-slide-shadow-bottom");y||(y=q("coverflow",w,i?"left":"top")),E||(E=q("coverflow",w,i?"right":"bottom")),y&&(y.style.opacity=c>0?c:0),E&&(E.style.opacity=-c>0?-c:0)}}},setTransition:p=>{a.slides.map(s=>P(s)).forEach(s=>{s.style.transitionDuration=`${p}ms`,s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(r=>{r.style.transitionDuration=`${p}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function ee(){const[d,a]=f.useState([]),[t,o]=f.useState(0),l=f.useRef(null),[h,p]=f.useState(!1);f.useEffect(()=>{const s=()=>{p(window.parent.document.body.classList.contains("dark"))};s();const r=new MutationObserver(s);return r.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>r.disconnect()},[]),f.useEffect(()=>{(()=>{const e=new URLSearchParams(window.location.hash.substring(1)),i=e.get("feed"),u=parseInt(e.get("scene"),10);console.log(`Initial hash params - feed: ${i}, scene: ${u}`),window.history.replaceState(null,null,"#feed=nasa&scene=1"),o(1)})(),(async()=>{try{const e=await fetch("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&hd=True&count=9");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const i=await e.json();a(i)}catch(e){console.error("Failed to fetch images: "+e)}})()},[]),f.useEffect(()=>{const s=()=>{const r=new URLSearchParams(window.location.hash.substring(1)),e=parseInt(r.get("scene"),10);!isNaN(e)&&e>0&&e<10&&l.current?l.current.swiper.slideToLoop(e-1):l.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",s),()=>{window.removeEventListener("hashchange",s)}},[]);const m=s=>{const r=s.realIndex+1;o(r),window.history.replaceState(null,null,`#feed=nasa&scene=${r}`)};return f.useEffect(()=>{console.log(`activeIndex updated: ${t}`)},[t]),f.useEffect(()=>{(()=>{document.querySelectorAll(".swiper-slide iframe").forEach(r=>{r.addEventListener("mouseenter",()=>{r.style.pointerEvents="auto"}),r.addEventListener("mouseleave",()=>{r.style.pointerEvents="none"})})})()},[d]),n.jsx("div",{className:`${v.swiperContainer} ${h?v.dark:""}`,children:n.jsx(D,{effect:"coverflow",grabCursor:!0,loop:d.length>3,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:40,stretch:0,depth:100,modifier:1,slideShadows:!1},modules:[Q,U,Y],spaceBetween:50,navigation:!0,pagination:{clickable:!0},onSlideChange:m,className:v.mySwiper,slidesPerGroup:1,ref:l,children:d.map((s,r)=>n.jsx(B,{className:v.swiperSlide,children:n.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:[s.media_type==="video"?n.jsx("iframe",{src:s.url,title:s.title,allowFullScreen:!0}):n.jsx("img",{src:s.url,alt:s.title||"Slide Image"}),n.jsx("p",{children:s.title})]})},r))})})}function te(){return n.jsx(n.Fragment,{children:n.jsx(ee,{})})}V(document.getElementById("root")).render(n.jsx(f.StrictMode,{children:n.jsx(te,{})}));
