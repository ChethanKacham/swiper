import{r as t,h as f,j as n,S as p,N as S,P as m,a as v,c as x}from"./index.js";import{E as g}from"./effect-coverflow.js";const j="_swiperContainer_1j7j7_3",E="_mySwiper_1j7j7_13",b="_dark_1j7j7_25",I="_swiperSlide_1j7j7_33",l={swiperContainer:j,mySwiper:E,dark:b,swiperSlide:I};function y({images:i}){const[d,c]=t.useState(0),a=t.useRef(null),[u,o]=t.useState(!1);t.useEffect(()=>{const e=()=>o(window.parent.document.body.classList.contains("dark"));e();const s=new MutationObserver(e);return s.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>s.disconnect()},[]),t.useEffect(()=>{(()=>{const s=new URLSearchParams(window.location.hash.substring(1)),r=s.get("feed"),w=parseInt(s.get("scene"),10);console.log(`Initial hash params - feed: ${r}, scene: ${w}`),window.history.replaceState(null,null,"#feed=nasa&scene=1"),c(1)})()},[]),t.useEffect(()=>{const e=()=>{const s=new URLSearchParams(window.location.hash.substring(1)),r=parseInt(s.get("scene"),10);!isNaN(r)&&r>0&&r<11&&a.current?a.current.swiper.slideToLoop(r-1):a.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);const h=e=>{const s=e.realIndex+1;c(s),window.history.replaceState(null,null,`#feed=nasa&scene=${s}`)};return t.useEffect(()=>{console.log(`activeIndex updated: ${d}`)},[d]),t.useEffect(()=>{f()},[i]),n.jsx("div",{className:`${l.swiperContainer} ${u?l.dark:""}`,children:n.jsx(p,{effect:"coverflow",grabCursor:!0,loop:i.length>3,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:40,stretch:0,depth:100,modifier:1,slideShadows:!1},modules:[g,S,m],spaceBetween:50,navigation:!0,pagination:{clickable:!0},onSlideChange:h,className:l.mySwiper,slidesPerGroup:1,ref:a,children:i.map((e,s)=>n.jsx(v,{className:l.swiperSlide,children:n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[e.media_type==="video"?n.jsx("iframe",{src:e.url,title:e.title,allowFullScreen:!0}):n.jsx("img",{src:e.url,alt:e.title||"Slide Image"}),n.jsx("p",{children:e.title})]})},s))})})}function k({images:i}){const[d,c]=t.useState(0),a=t.useRef(null),[u,o]=t.useState(!1);t.useEffect(()=>{const e=()=>o(window.parent.document.body.classList.contains("dark"));e();const s=new MutationObserver(e);return s.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>s.disconnect()},[]),t.useEffect(()=>{(()=>{const s=new URLSearchParams(window.location.hash.substring(1)),r=s.get("feed"),w=parseInt(s.get("scene"),10);console.log(`Initial hash params - feed: ${r}, scene: ${w}`),window.history.replaceState(null,null,"#feed=nasa&scene=1"),c(1)})()},[]),t.useEffect(()=>{const e=()=>{const s=new URLSearchParams(window.location.hash.substring(1)),r=parseInt(s.get("scene"),10);!isNaN(r)&&r>0&&r<11&&a.current?a.current.swiper.slideToLoop(r-1):a.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);const h=e=>{const s=e.realIndex+1;c(s),window.history.replaceState(null,null,`#feed=nasa&scene=${s}`)};return t.useEffect(()=>{console.log(`activeIndex updated: ${d}`)},[d]),t.useEffect(()=>{f()},[i]),n.jsx("div",{className:`${l.swiperContainer} ${u?l.dark:""}`,children:n.jsx(p,{effect:"slide",grabCursor:!0,loop:i.length>3,centeredSlides:!0,slidesPerView:"auto",modules:[S,m],spaceBetween:0,navigation:!0,pagination:{clickable:!0},onSlideChange:h,className:l.mySwiper,slidesPerGroup:1,ref:a,children:i.map((e,s)=>n.jsx(v,{className:l.swiperSlide,children:n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[e.media_type==="video"?n.jsx("iframe",{src:e.url,title:e.title,allowFullScreen:!0}):n.jsx("img",{src:e.url,alt:e.title||"Slide Image"}),n.jsx("p",{children:e.title})]})},s))})})}function _(){const[i,d]=t.useState(window.innerWidth<800),[c,a]=t.useState([]);return t.useEffect(()=>{const u=()=>{d(window.innerWidth<800)};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),t.useEffect(()=>{(async()=>{try{const o=await fetch("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&hd=True&count=10");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const h=await o.json();a(h)}catch(o){console.error("Failed to fetch images: "+o)}})()},[]),n.jsx("div",{children:i?n.jsx(k,{images:c}):n.jsx(y,{images:c})})}x(document.getElementById("root")).render(n.jsx(t.StrictMode,{children:n.jsx(_,{})}));
