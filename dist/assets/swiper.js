import{g as P,c as V,a as Y,r as i,h as N,j as n,S as R,N as z,P as H,b as O,d as G}from"./index.js";const W="_swiperContainer_1j7j7_3",X="_mySwiper_1j7j7_13",K="_dark_1j7j7_25",Z="_swiperSlide_1j7j7_33",m={swiperContainer:W,mySwiper:X,dark:K,swiperSlide:Z};function J(d){const{effect:r,swiper:s,on:a,setTranslate:h,setTransition:c,overwriteParams:w,perspective:e,recreateShadows:t,getEffectParams:o}=d;a("beforeInit",()=>{if(s.params.effect!==r)return;s.classNames.push(`${s.params.containerModifierClass}${r}`),e&&e()&&s.classNames.push(`${s.params.containerModifierClass}3d`);const f=w?w():{};Object.assign(s.params,f),Object.assign(s.originalParams,f)}),a("setTranslate",()=>{s.params.effect===r&&h()}),a("setTransition",(f,S)=>{s.params.effect===r&&c(S)}),a("transitionEnd",()=>{if(s.params.effect===r&&t){if(!o||!o().slideShadows)return;s.slides.forEach(f=>{f.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(S=>S.remove())}),t()}});let l;a("virtualUpdate",()=>{s.params.effect===r&&(s.slides.length||(l=!0),requestAnimationFrame(()=>{l&&s.slides&&s.slides.length&&(h(),l=!1)}))})}function Q(d,r){const s=P(r);return s!==r&&(s.style.backfaceVisibility="hidden",s.style["-webkit-backface-visibility"]="hidden"),s}function L(d,r,s){const a=`swiper-slide-shadow${s?`-${s}`:""}${` swiper-slide-shadow-${d}`}`,h=P(r);let c=h.querySelector(`.${a.split(" ").join(".")}`);return c||(c=V("div",a.split(" ")),h.append(c)),c}function ee(d){let{swiper:r,extendParams:s,on:a}=d;s({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),J({effect:"coverflow",swiper:r,on:a,setTranslate:()=>{const{width:w,height:e,slides:t,slidesSizesGrid:o}=r,l=r.params.coverflowEffect,f=r.isHorizontal(),S=r.translate,q=f?-S+w/2:-S+e/2,_=f?l.rotate:-l.rotate,D=l.depth,C=Y(r);for(let b=0,F=t.length;b<F;b+=1){const p=t[b],E=o[b],A=p.swiperSlideOffset,T=(q-A-E/2)/E,u=typeof l.modifier=="function"?l.modifier(T):T*l.modifier;let x=f?_*u:0,j=f?0:_*u,$=-D*Math.abs(u),g=l.stretch;typeof g=="string"&&g.indexOf("%")!==-1&&(g=parseFloat(l.stretch)/100*E);let I=f?0:g*u,M=f?g*u:0,k=1-(1-l.scale)*Math.abs(u);Math.abs(M)<.001&&(M=0),Math.abs(I)<.001&&(I=0),Math.abs($)<.001&&($=0),Math.abs(x)<.001&&(x=0),Math.abs(j)<.001&&(j=0),Math.abs(k)<.001&&(k=0);const U=`translate3d(${M}px,${I}px,${$}px)  rotateX(${C(j)}deg) rotateY(${C(x)}deg) scale(${k})`,B=Q(l,p);if(B.style.transform=U,p.style.zIndex=-Math.abs(Math.round(u))+1,l.slideShadows){let v=f?p.querySelector(".swiper-slide-shadow-left"):p.querySelector(".swiper-slide-shadow-top"),y=f?p.querySelector(".swiper-slide-shadow-right"):p.querySelector(".swiper-slide-shadow-bottom");v||(v=L("coverflow",p,f?"left":"top")),y||(y=L("coverflow",p,f?"right":"bottom")),v&&(v.style.opacity=u>0?u:0),y&&(y.style.opacity=-u>0?-u:0)}}},setTransition:w=>{r.slides.map(t=>P(t)).forEach(t=>{t.style.transitionDuration=`${w}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(o=>{o.style.transitionDuration=`${w}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function te({images:d}){const[r,s]=i.useState(0),a=i.useRef(null),[h,c]=i.useState(!1);i.useEffect(()=>{const e=()=>{c(window.parent.document.body.classList.contains("dark"))};e();const t=new MutationObserver(e);return t.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]),i.useEffect(()=>{(()=>{const t=new URLSearchParams(window.location.hash.substring(1)),o=t.get("feed"),l=parseInt(t.get("scene"),10);console.log(`Initial hash params - feed: ${o}, scene: ${l}`),window.history.replaceState(null,null,"#feed=nasa&scene=1"),s(1)})()},[]),i.useEffect(()=>{const e=()=>{const t=new URLSearchParams(window.location.hash.substring(1)),o=parseInt(t.get("scene"),10);!isNaN(o)&&o>0&&o<11&&a.current?a.current.swiper.slideToLoop(o-1):a.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[]);const w=e=>{const t=e.realIndex+1;s(t),window.history.replaceState(null,null,`#feed=nasa&scene=${t}`)};return i.useEffect(()=>{console.log(`activeIndex updated: ${r}`)},[r]),i.useEffect(()=>{N()},[d]),n.jsx("div",{className:`${m.swiperContainer} ${h?m.dark:""}`,children:n.jsx(R,{effect:"coverflow",grabCursor:!0,loop:d.length>3,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:40,stretch:0,depth:100,modifier:1,slideShadows:!1},modules:[ee,z,H],spaceBetween:50,navigation:!0,pagination:{clickable:!0},onSlideChange:w,className:m.mySwiper,slidesPerGroup:1,ref:a,children:d.map((e,t)=>n.jsx(O,{className:m.swiperSlide,children:n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[e.media_type==="video"?n.jsx("iframe",{src:e.url,title:e.title,allowFullScreen:!0}):n.jsx("img",{src:e.url,alt:e.title||"Slide Image"}),n.jsx("p",{children:e.title})]})},t))})})}function se({images:d}){const[r,s]=i.useState(0),a=i.useRef(null),[h,c]=i.useState(!1);i.useEffect(()=>{const e=()=>{c(window.parent.document.body.classList.contains("dark"))};e();const t=new MutationObserver(e);return t.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]),i.useEffect(()=>{(()=>{const t=new URLSearchParams(window.location.hash.substring(1)),o=t.get("feed"),l=parseInt(t.get("scene"),10);console.log(`Initial hash params - feed: ${o}, scene: ${l}`),window.history.replaceState(null,null,"#feed=nasa&scene=1"),s(1)})()},[]),i.useEffect(()=>{const e=()=>{const t=new URLSearchParams(window.location.hash.substring(1)),o=parseInt(t.get("scene"),10);!isNaN(o)&&o>0&&o<11&&a.current?a.current.swiper.slideToLoop(o-1):a.current.swiper.slideToLoop(0)};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[]);const w=e=>{const t=e.realIndex+1;s(t),window.history.replaceState(null,null,`#feed=nasa&scene=${t}`)};return i.useEffect(()=>{console.log(`activeIndex updated: ${r}`)},[r]),i.useEffect(()=>{N()},[d]),n.jsx("div",{className:`${m.swiperContainer} ${h?m.dark:""}`,children:n.jsx(R,{effect:"slide",grabCursor:!0,loop:d.length>3,centeredSlides:!0,slidesPerView:"auto",modules:[z,H],spaceBetween:0,navigation:!0,pagination:{clickable:!0},onSlideChange:w,className:m.mySwiper,slidesPerGroup:1,ref:a,children:d.map((e,t)=>n.jsx(O,{className:m.swiperSlide,children:n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[e.media_type==="video"?n.jsx("iframe",{src:e.url,title:e.title,allowFullScreen:!0}):n.jsx("img",{src:e.url,alt:e.title||"Slide Image"}),n.jsx("p",{children:e.title})]})},t))})})}function re(){const[d,r]=i.useState(window.innerWidth<800),[s,a]=i.useState([]);return i.useEffect(()=>{const h=()=>{r(window.innerWidth<800)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),i.useEffect(()=>{(async()=>{try{const c=await fetch("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&hd=True&count=10");if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const w=await c.json();a(w)}catch(c){console.error("Failed to fetch images: "+c)}})()},[]),n.jsx("div",{children:d?n.jsx(se,{images:s}):n.jsx(te,{images:s})})}function ae(){return n.jsx(n.Fragment,{children:n.jsx(re,{})})}G(document.getElementById("root")).render(n.jsx(i.StrictMode,{children:n.jsx(ae,{})}));
